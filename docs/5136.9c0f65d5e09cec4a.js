"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5136],{5136:(j,u,o)=>{o.r(u),o.d(u,{LocationSearchPageModule:()=>E});var r=o(6019),g=o(9133),n=o(5793),L=o(5899),t=o(865),A=o(3769),T=o(5038),p=o(5432),l=o(4096),S=o(4522);let v=(()=>{class e{constructor(s){this.http=s,this.googleAPIKey="&key=AIzaSyDg5AKBNjMvoBBlLgXpy-dLxLAcVJYpOq8",this.convertLatLongUrl="https://maps.googleapis.com/maps/api/geocode/json?latlng=",this.convertAddressUrl="https://maps.googleapis.com/maps/api/geocode/json?address="}convertLatLong(s,i){return this.http.get(this.convertLatLongUrl+s+","+i+this.googleAPIKey)}convertAddress(s){return this.http.get(this.convertAddressUrl+s+this.googleAPIKey)}}return e.\u0275fac=function(s){return new(s||e)(t.LFG(S.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();var m=o(9715),P=o(1677);function C(e,a){1&e&&t._UZ(0,"div")}function M(e,a){1&e&&(t.TgZ(0,"div",11),t.TgZ(1,"ion-item",6),t.TgZ(2,"b"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("ngClass","one"),t.xp6(3),t.Oqu(t.lcZ(4,2,"NO_LOCATION")))}function x(e,a){if(1&e&&(t.TgZ(0,"div"),t._UZ(1,"app-meeting-list",13),t.qZA()),2&e){const s=t.oxw(2);t.xp6(1),t.Q6J("data",s.addressMeetingList)}}function y(e,a){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,x,2,1,"div",12),t.qZA()),2&e){const s=t.oxw();t.xp6(1),t.Q6J("ngIf",s.isLoaded)}}const N=[{path:"",component:(()=>{class e{constructor(s,i,d,h,O,R){this.MeetingListProvider=s,this.loaderCtrl=i,this.storage=d,this.translate=h,this.GeolocateProvider=O,this.geolocation=R,this.shownGroup=null,this.loader=null,this.isLoaded=!1,this.currentAddress="",this.addressLatitude=0,this.addressLongitude=0,this.radiusMeters=1e4,this.meetingsListGrouping="weekday_tinyint",this.storage.get("searchRange").then(c=>{this.radius=c||25}),this.storage.get("savedAddressLat").then(c=>{c?(this.addressLatitude=c,this.storage.get("savedAddressLng").then(Z=>{Z?(this.addressLongitude=Z,this.storage.get("savedAddress").then(f=>{f?(this.currentAddress=f,this.getAllMeetings()):this.locatePhone()})):this.locatePhone()})):this.locatePhone()})}getAllMeetings(){this.translate.get("FINDING_MTGS").subscribe(s=>{this.presentLoader(s)}),this.MeetingListProvider.getAddressMeetings(this.addressLatitude,this.addressLongitude,this.radius).subscribe(s=>{this.addressMeetingList=s,this.isLoaded=!0,this.dismissLoader()})}presentLoader(s){this.loader||(this.loader=this.loaderCtrl.present(s))}dismissLoader(){this.loader&&(this.loader=this.loaderCtrl.dismiss(),this.loader=null)}locatePhone(){this.translate.get("LOCATING").subscribe(s=>{this.presentLoader(s)}),this.geolocation.getCurrentPosition().then(s=>{this.addressLatitude=s.coords.latitude,this.addressLongitude=s.coords.longitude,this.storage.set("savedAddressLat",this.addressLatitude),this.storage.set("savedAddressLng",this.addressLongitude),this.GeolocateProvider.convertLatLong(this.addressLatitude,this.addressLongitude).subscribe(i=>{this.currentAddress=i,this.currentAddress.results[0]?(this.currentAddress=this.currentAddress.results[0].formatted_address,this.storage.set("savedAddress",this.currentAddress),this.dismissLoader(),this.getAllMeetings()):(this.dismissLoader(),this.currentAddress="Location not found")})}).catch(s=>{console.log("Error getting location",s),this.currentAddress="Location not found",this.dismissLoader()})}}return e.\u0275fac=function(s){return new(s||e)(t.Y36(A.g),t.Y36(T.b),t.Y36(p.V),t.Y36(l.sK),t.Y36(v),t.Y36(m.b))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-location-search"]],decls:30,vars:21,consts:[["slot","start"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"ngClass",4,"ngSwitchCase"],[4,"ngSwitchDefault"],["no-padding",""],["text-wrap",""],["expand","full","color","primary","id","LocationButton",1,"col","text-center","text-wrap",3,"click"],["name","locate-outline"],["id","RadiusRange","min","5","max","50","color","danger","pin","true","debounce","500",3,"ngModel","ngModelChange","ionChange"],["slot","end"],[3,"ngClass"],[4,"ngIf"],["meetingType","regular",3,"data"]],template:function(s,i){1&s&&(t.TgZ(0,"ion-header"),t.TgZ(1,"ion-toolbar"),t.TgZ(2,"ion-buttons",0),t._UZ(3,"ion-menu-button"),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"ion-content"),t.TgZ(8,"div",1),t.YNc(9,C,1,0,"div",2),t.YNc(10,M,5,4,"div",3),t.YNc(11,y,2,1,"div",4),t.qZA(),t.qZA(),t.TgZ(12,"ion-footer",5),t.TgZ(13,"ion-toolbar",5),t.TgZ(14,"ion-item",6),t.TgZ(15,"b"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.TgZ(18,"ion-item",6),t.TgZ(19,"ion-button",7),t.NdJ("click",function(){return i.locatePhone()}),t._UZ(20,"ion-icon",8),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.qZA(),t.TgZ(23,"ion-range",9),t.NdJ("ngModelChange",function(h){return i.radius=h})("ionChange",function(){return i.getAllMeetings()}),t.TgZ(24,"ion-label",0),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"ion-label",10),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&s&&(t.xp6(5),t.hij(" ",t.lcZ(6,11,"LOCATIONSEARCH")," "),t.xp6(3),t.s9C("ngSwitch",i.currentAddress),t.xp6(1),t.Q6J("ngSwitchCase",""),t.xp6(1),t.Q6J("ngSwitchCase","Location not found"),t.xp6(6),t.lnq("",i.radius," ",t.lcZ(17,13,"MEETINGS_NEAREST")," ",i.currentAddress,""),t.xp6(5),t.hij("\xa0",t.lcZ(22,15,"LOCATIONSEARCH")," "),t.xp6(2),t.Q6J("ngModel",i.radius),t.xp6(2),t.hij("5 ",t.lcZ(26,17,"MEETINGS"),""),t.xp6(3),t.hij("50 ",t.lcZ(29,19,"MEETINGS"),""))},directives:[n.Gu,n.sr,n.Sm,n.fG,n.wd,n.W2,r.RF,r.n9,r.ED,n.fr,n.Ie,n.YG,n.gu,n.I_,n.QI,g.JJ,g.On,n.Q$,r.mk,r.O5,P.D],pipes:[l.X$],styles:[""]}),e})()}];let I=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[L.Bz.forChild(N)],L.Bz]}),e})();var G=o(6054),U=o(1173),J=o(185),Y=o(5247);let E=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[G.i,A.g,v,m.b,Y.t,p.V],imports:[[r.ez,g.u5,n.Pc,l.aw,U.D,I,J.D]]}),e})()}}]);